if (IL_DevMod) then
{
	Player globalChat Format ["IgiLoad ""%1"" in IL_SetMass", IL_Script_Inst];
};

if !(IL_Mass) ExitWith {};
private ["_v", "_v_def_mass", "_cargo_mass"];
_v = _this select 0;
_v_def_mass =  if (count _this > 1) then {_this select 1} else {0};
_cargo_mass =  if (count _this > 2) then {_this select 2} else {0};

if (_v_def_mass == 0) then
{
	_v_def_mass = [_v] call IL_GetDefaultMass;
};
if (_cargo_mass == 0) then
{
	_cargo_mass = [_v] call IL_GetCargoMass;
};

if ((getMass _v) != (_v_def_mass + _cargo_mass)) then
{
	IL_SetMass = [_v, (_v_def_mass + _cargo_mass)];
	if (local _v) then
	{
		["Cos", IL_SetMass] spawn IL_Server_SetMass;
	}
	else
	{
		if (isDedicated) then
		{
			(owner _v) publicVariableClient "IL_SetMass";
		}
		else
		{
			publicVariableServer "IL_SetMass";
		};
	};
};
